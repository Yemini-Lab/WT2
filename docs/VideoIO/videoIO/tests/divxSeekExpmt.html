<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of divxSeekExpmt</title>
  <meta name="keywords" content="divxSeekExpmt">
  <meta name="description" content="divxSeekExpmt">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html videoIO --><!-- menu.html tests -->
<h1>divxSeekExpmt
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>divxSeekExpmt</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function divxSeekExpmt </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">divxSeekExpmt
  This is a test file for debugging off-by-one biases for mpeg4 decoders,
  especially the DivX and ffdshow filters on Windows.  People other than
  the author will probably not need this file.

Example:
  divxSeekExpmt;
  --&gt; a few plots are created that the user can check for consistency.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../videoIO/@videoReader/close.html" class="code" title="function vr = close(vr)">close</a>	VR=CLOSE(VR)</li><li><a href="../../videoIO/@videoReader/get.html" class="code" title="function info = get(vr,varargin)">get</a>	INFO=GET(VR)</li><li><a href="../../videoIO/@videoReader/getframe.html" class="code" title="function frame = getframe(vr)">getframe</a>	FRAME=GETFRAME(VR)</li><li><a href="../../videoIO/@videoReader/next.html" class="code" title="function worked = next(vr)">next</a>	WORKED=NEXT(VR)</li><li><a href="../../videoIO/@videoReader/seek.html" class="code" title="function worked = seek(vr,fnum)">seek</a>	WORKED=SEEK(VR,FNUM)</li><li><a href="../../videoIO/@videoReader/videoReader.html" class="code" title="function vr = videoReader(url, varargin)">videoReader</a>	videoReader class constructor</li><li><a href="../../videoIO/@videoWriter/close.html" class="code" title="function vw = close(vw)">close</a>	VW=CLOSE(VW)</li><li><a href="../../videoIO/@videoWriter/get.html" class="code" title="function info = get(vw,varargin)">get</a>	INFO=GET(VW)</li><li><a href="../../videoIO/buildVideoIO.html" class="code" title="function buildVideoIO(varargin)">buildVideoIO</a>	buildVideoIO</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function showResult(mov, vr, f)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function divxSeekExpmt</a>
0002 <span class="comment">%divxSeekExpmt</span>
0003 <span class="comment">%  This is a test file for debugging off-by-one biases for mpeg4 decoders,</span>
0004 <span class="comment">%  especially the DivX and ffdshow filters on Windows.  People other than</span>
0005 <span class="comment">%  the author will probably not need this file.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%Example:</span>
0008 <span class="comment">%  divxSeekExpmt;</span>
0009 <span class="comment">%  --&gt; a few plots are created that the user can check for consistency.</span>
0010 
0011 <span class="comment">%%</span>
0012 clear all; clc; clf; drawnow;
0013 <a href="../../videoIO/buildVideoIO.html" class="code" title="function buildVideoIO(varargin)">buildVideoIO</a>;
0014 mov = videoRead(<span class="string">'numbers.uncompressed.avi'</span>);
0015 R = 2;
0016 C = 3;
0017 
0018 <span class="comment">%%</span>
0019 rr = 1;
0020 vr = <a href="../../videoIO/@videoReader/videoReader.html" class="code" title="function vr = videoReader(url, varargin)">videoReader</a>(<span class="string">'numbers.divx611.avi'</span>);
0021 <a href="../../videoIO/@videoReader/get.html" class="code" title="function info = get(vr,varargin)">get</a>(vr)
0022 subplot(R,C,C*(rr-1)+1); <a href="../../videoIO/@videoReader/next.html" class="code" title="function worked = next(vr)">next</a>(vr); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,0); ylabel(<span class="string">'next from 0'</span>);
0023 subplot(R,C,C*(rr-1)+2); <a href="../../videoIO/@videoReader/next.html" class="code" title="function worked = next(vr)">next</a>(vr); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,1);
0024 subplot(R,C,C*(rr-1)+3); <a href="../../videoIO/@videoReader/next.html" class="code" title="function worked = next(vr)">next</a>(vr); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,2);
0025 vr = <a href="../../videoIO/@videoReader/close.html" class="code" title="function vr = close(vr)">close</a>(vr); <span class="comment">%#ok&lt;NASGU&gt;</span>
0026 
0027 <span class="comment">%%</span>
0028 rr = 2;
0029 k=20;
0030 
0031 vr = <a href="../../videoIO/@videoReader/videoReader.html" class="code" title="function vr = videoReader(url, varargin)">videoReader</a>(<span class="string">'numbers.divx611.avi'</span>,<span class="string">'preciseFrames'</span>,k);
0032 subplot(R,C,C*(rr-1)+1); f=19; <a href="../../videoIO/@videoReader/seek.html" class="code" title="function worked = seek(vr,fnum)">seek</a>(vr,f); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,f); ylabel(sprintf(<span class="string">'seek %d, pf=%d'</span>, f, k));
0033 vr = <a href="../../videoIO/@videoReader/close.html" class="code" title="function vr = close(vr)">close</a>(vr); <span class="comment">%#ok&lt;NASGU&gt;</span>
0034 
0035 vr = <a href="../../videoIO/@videoReader/videoReader.html" class="code" title="function vr = videoReader(url, varargin)">videoReader</a>(<span class="string">'numbers.divx611.avi'</span>,<span class="string">'preciseFrames'</span>,k);
0036 subplot(R,C,C*(rr-1)+2); f=20; <a href="../../videoIO/@videoReader/seek.html" class="code" title="function worked = seek(vr,fnum)">seek</a>(vr,f); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,f); ylabel(sprintf(<span class="string">'seek %d, pf=%d'</span>, f, k));
0037 vr = <a href="../../videoIO/@videoReader/close.html" class="code" title="function vr = close(vr)">close</a>(vr); <span class="comment">%#ok&lt;NASGU&gt;</span>
0038 
0039 vr = <a href="../../videoIO/@videoReader/videoReader.html" class="code" title="function vr = videoReader(url, varargin)">videoReader</a>(<span class="string">'numbers.divx611.avi'</span>,<span class="string">'preciseFrames'</span>,k);
0040 subplot(R,C,C*(rr-1)+3); f=21; <a href="../../videoIO/@videoReader/seek.html" class="code" title="function worked = seek(vr,fnum)">seek</a>(vr,f); <a href="#_sub1" class="code" title="subfunction showResult(mov, vr, f)">showResult</a>(mov,vr,f); ylabel(sprintf(<span class="string">'seek %d, pf=%d'</span>, f, k));
0041 vr = <a href="../../videoIO/@videoReader/close.html" class="code" title="function vr = close(vr)">close</a>(vr); <span class="comment">%#ok&lt;NASGU&gt;</span>
0042 
0043 <span class="comment">%----------------------------------------------------------------------</span>
0044 <a name="_sub1" href="#_subfunctions" class="code">function showResult(mov, vr, f)</a>
0045 
0046 img = double(<a href="../../videoIO/@videoReader/getframe.html" class="code" title="function frame = getframe(vr)">getframe</a>(vr))/255;
0047 
0048 N = length(mov);
0049 mad = zeros(N,1);
0050 <span class="keyword">for</span> i=1:N
0051   mad(i) = mean(mean(mean(abs(double(mov(i).cdata)/255 - img))));
0052 <span class="keyword">end</span>
0053 [dummy,bestGuess] = min(mad);
0054 bestGuess = bestGuess - 1;
0055 
0056 <span class="keyword">if</span> bestGuess == f
0057   imshow(img);
0058   title(f);
0059 <span class="keyword">else</span>
0060   imshow(1-img);
0061   title(sprintf(<span class="string">'is %d; expected %d'</span>, bestGuess, f));
0062 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 27-Jun-2013 11:03:38 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>